{% extends 'layout.html' %}
{% block title %}Manage Platforms{% endblock %}
{% block content %}
<div class="container admin-form">
    
    <h2>{% if platform %}Update Platform{% else %}Add New Platform{% endif %}</h2>

    <form method="POST">
        {% if platform %}
        <input type="hidden" name="id" value="{{ platform.id }}">
        {% endif %}

        <label for="name">Platform Name (e.g., GitHub, LeetCode)</label>
        <input type="text" name="name" value="{{ platform.name if platform else '' }}" required>
        
        <label for="link">Full URL Link</label>
        <input type="url" name="link" value="{{ platform.link if platform else '' }}" required>
        
        <label for="description">Description</label>
        <textarea name="description" rows="3" placeholder="A brief description of the profile...">{{ platform.description if platform else '' }}</textarea>
        
        <button type="submit">{% if platform %}Update Platform{% else %}Add Platform{% endif %}</button>
        {% if platform %}
        <a href="{{ url_for('edit_platforms') }}" class="cancel-btn">Cancel Edit</a>
        {% endif %}
    </form>
    
    <hr>

    <h3>Existing Platforms</h3>
    <ul class="admin-list">
        {% for p in platforms_list %}
        <li>
            <div class="item-info">
                <strong>{{ p[1] }}</strong>
                <p>{{ p[3] }}</p> </div>
            <div class="item-actions">
                <a href="{{ url_for('edit_platforms', platform_id=p[0]) }}" class="edit-link">Edit</a>
                <a href="{{ url_for('delete_platform', platform_id=p[0]) }}" class="delete-link" onclick="return confirm('Are you sure you want to delete this?')">Delete</a>
            </div>
        </li>
        {% else %}
        <li>No platforms added yet.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}